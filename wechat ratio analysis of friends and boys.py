import itchat
itchat.auto_login()
friends=itchat.get_friends(update=True)
male=female=other=0
maletxt=femaletxt=othertxt=""
def ifnoRemarkName(i,txt):  #防止没有备注，以网名替换
	if i["RemarkName"]=="":
			txt=txt+"  "+"网名:"+i["NickName"]+"  "+"尚未备注"
	else:
			txt=txt+"  "+"网名:"+i["NickName"]+"  "+"备注:"+i["RemarkName"]
	return txt
def delect(txt):
	txt=list(txt)
	txt[0]=""
	txt="".join(txt)
	return txt
for i in friends[1:]:
	sex=i["Sex"]
	if sex==1:
		male+=1
		maletxt=ifnoRemarkName(i,maletxt)
	elif sex==2:
		female+=1
		femaletxt=ifnoRemarkName(i,femaletxt)
	else:
		other+=1
		othertxt=ifnoRemarkName(i,othertxt)
maletxt=delect(maletxt)
femaletxt=delect(femaletxt)
othertxt=delect(othertxt)
print("请扫码登录！")
print("您的好友总数为"+str(len(friends[1:])))
print("男性的数量为"+str(male))
print("名字为："+maletxt)
print("女性的数量为"+str(female))
print("名字为："+femaletxt)
print("有"+str(other)+"个人未知性别")
print("名字为："+othertxt)
file="男:"+str(male)+maletxt+"\n"+"女:"+str(female)+femaletxt+"\n"+"其他:"+str(other)+othertxt
with open("分析结果.txt","w",encoding="utf-8") as f:
	f.write(file)
print("分析结果自动保存到当前根目录下 分析结果.txt")
