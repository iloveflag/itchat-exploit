import itchat
import requests
def fuckdelect(args):
	list=["傻","逼","草","曹","儿子","爸爸","狗","二","残","孙子","弱","日"]
	for i in args:
		if i in list:
			return "1"
def get_response(msg):
	apiUrl='http://www.tuling123.com/openapi/api'
	KEY='7f77e8cf75644abab7194ec4c8624bc0'
	data={
		"key":KEY,
		"info":msg,
		"userid":"wechat-robot"
	}
	try:
		r=requests.post(apiUrl,data=data).json()
		return r["text"]
	except:
		return "很抱歉,机器人发生了错误"
def specialreply(msg):
	if msg["User"]["NickName"]=="":
		return "2"
	if msg["User"]["NickName"]=="":
		return "3"
	if msg["User"]["NickName"]=="":
		return "4"
	if msg["User"]["NickName"]=="":
		return "5"
	if msg["User"]["NickName"]=="":
		return "6"
@itchat.msg_register(itchat.content.TEXT)
def text_reply(msg):
	args=msg["Text"]
	if fuckdelect(args)=="1":
		return "检测到不良信息,请注意文明素养"
	elif specialreply(msg)=="2":
		return ""
	elif specialreply(msg)=="3":
		return ""
	elif specialreply(msg)=="4":
		return ""
	elif specialreply(msg)=="5":
		return ""
	elif specialreply(msg)=="6":
		return ""
	if args == "1":
 		return ""
	elif args=="2":
		return ""
	elif args=="3":
		return ""
	elif args=="4":
		return ""
	elif args=="5":
		return ""
	elif args=="菜单":
		return "zmbxzrq@outlook.com" 
	else:
		replay=get_response(args)
		return replay+"详情请回复菜单"
itchat.auto_login(hotReload=True,enableCmdQR=True)
itchat.run()
